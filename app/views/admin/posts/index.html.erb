<% content_for :title, t('.posts') %>

<div class="col-12 content mb-3">
  <h2 class="text-center mb-4"><%= t('.posts') %></h2>
  <div class="responsive-header">
    <div class="responsive-header__title"><%= t('.title') %></div>
    <div class="responsive-header__published"><%= t('.published') %></div>
    <div class="responsive-header__visits-count"><%= t('.visits-count') %></div>
    <div class="responsive-header__actions"><%= t('.actions') %></div>
  </div>
  <% @posts.each do |post| %>
    <div class="responsive-table">
      <div class="responsive-table__title"><%= post.title %></div>
      <div class="responsive-table__published">
        <% if post.published? %>
          <%= post.updated_at.strftime('%d/%m/%Y') %>
        <% else %>
          <%= post.translated_status %>
        <% end %>
      </div>
      <div class="responsive-table__visits-count">
        <span class="legend"><%= t('.visits-count') %>:</span> <%= post.visit_count %>
      </div>
      <div class="responsive-table__actions">
        <%= link_to admin_post_path(id: post.slug),
            :class => "btn btn-sm btn-info text-center" do %>
          <i class="fa fa-eye" aria-hidden="true"></i>
        <% end %>
        <%= link_to edit_admin_post_path(id: post.slug),
            :class => "btn btn-sm btn-primary text-center" do %>
          <i class="fa fa-edit" aria-hidden="true"></i>
        <% end %>
        <% if post.published? %>
          <%= link_to admin_post_draft_path(post_id: post.slug), :method => :put,
              :class =>  "btn btn-sm btn-warning text-center" do %>
            <i class="fa fa-thumbs-down" aria-hidden="true"></i>
          <% end %>
        <% else %>
          <%= link_to admin_post_publish_path(post_id: post.slug), :method => :put,
              :class => "btn btn-sm btn-success text-center" do %>
            <i class="fa fa-thumbs-up" aria-hidden="true"></i>
          <% end %>
        <% end %>
        <%= link_to admin_post_path(id: post.slug),
            data: { confirm: t('.delete_confirm') }, :method => :delete,
            :class => "btn btn-sm btn-danger text-center" do %>
          <i class="fa fa-remove" aria-hidden="true"></i>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
